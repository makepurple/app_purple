import NextLink from "next/link";
import React, { CSSProperties, FC } from "react";
import { keyframes } from "styled-components";
import tw, { styled, theme } from "twin.macro";
import { MaybeWrap } from "../MaybeWrap";

const blink = keyframes`
    0% {
        opacity: 1
    }

    50% {
        opacity: 0
    }

    to {
        opacity: 1
    }
`;

const Root = tw.a`
	flex
	items-center
	justify-center
	h-11
	w-11
	rounded-md
	overflow-hidden
	cursor-pointer
	[&[href]]:hover:bg-indigo-100
`;

const Icon = tw.svg`
	h-full
	w-full
`;

const Cursor = styled.path`
	animation: ${blink} 1.2s linear infinite;

	${tw`
		motion-reduce:animate-none
	`}
`;

export interface LogoProps {
	"aria-label"?: string;
	className?: string;
	href?: Maybe<string>;
	style?: CSSProperties;
}

export const Logo: FC<LogoProps> = ({
	"aria-label": ariaLabel = "home",
	href = "/",
	className,
	style
}) => {
	const Type = href ? "a" : "span";

	return (
		<MaybeWrap
			condition={!!href}
			wrap={({ child }) => (
				<>
					{!!href && (
						<NextLink href={href} passHref>
							{child}
						</NextLink>
					)}
				</>
			)}
		>
			<Root
				as={Type}
				className={className}
				style={style}
				aria-label={href ? ariaLabel : undefined}
			>
				<Icon
					width={200}
					height={200}
					viewBox="0 0 200 200"
					fill="none"
					xmlns="http://www.w3.org/2000/svg"
				>
					<Cursor
						d="M90.9136 42.6249C90.9136 40.625 92.5348 39.0038 94.5347 39.0038H105.461C107.461 39.0038 109.082 40.625 109.082 42.6249V159.334C109.082 161.333 107.461 162.955 105.461 162.955H94.5347C92.5348 162.955 90.9136 161.333 90.9136 159.334V42.6249Z"
						fill={theme`colors.violet.600`}
					/>
					<path
						fillRule="evenodd"
						clipRule="evenodd"
						d="M163.243 180.408C146.867 176.665 132.37 167.987 121.401 156.022C120.803 155.37 120.481 154.513 120.481 153.628L120.481 149.568C120.481 146.567 123.985 144.797 126.599 146.273C130.54 148.497 134.799 150.225 139.29 151.37C141.228 151.864 143.133 150.548 143.327 148.558C143.465 147.151 143.535 145.724 143.535 144.281C143.535 131.206 137.771 119.477 128.646 111.496C126.368 109.504 126.799 105.531 129.638 104.481L131.807 103.678C134.531 102.67 134.531 98.8168 131.807 97.8087C129.205 96.8459 129 93.1114 131.338 91.6189C144.898 82.9659 154.643 68.8627 157.486 52.3964C157.826 50.4259 156.379 48.622 154.381 48.5415C153.672 48.513 152.959 48.4986 152.242 48.4986C142.924 48.4986 134.174 50.9384 126.599 55.2142C123.985 56.6897 120.481 54.9203 120.481 51.9186L120.481 48.3324C120.481 47.4473 120.803 46.5905 121.401 45.9381C136.296 29.6912 157.695 19.5049 181.473 19.5049C183.273 19.5049 185.06 19.5633 186.83 19.6782C188.826 19.8078 190.268 21.6066 189.972 23.5842C185.845 51.1502 169.351 74.6722 146.317 88.3231C143.555 89.96 143.778 94.2477 146.789 95.362L152.794 97.584C155.947 98.7506 155.947 103.21 152.794 104.376L142.296 108.261C139.458 109.311 139.046 113.243 141.442 115.092C157.531 127.508 167.894 146.982 167.894 168.876C167.894 171.818 167.707 174.716 167.344 177.559C167.091 179.542 165.192 180.853 163.243 180.408Z"
						fill={theme`colors.blue.500`}
					/>
					<path
						d="M79.5179 149.568V153.629C79.5179 154.514 79.1961 155.371 78.598 156.023C67.6293 167.987 53.1331 176.665 36.7571 180.408C34.808 180.853 32.9094 179.542 32.6562 177.559C32.2932 174.716 32.1061 171.818 32.1061 168.876C32.1061 146.982 42.4693 127.508 58.558 115.092C60.9541 113.243 60.5425 109.311 57.7039 108.261L47.2061 104.376C44.0535 103.21 44.0535 98.7506 47.2061 97.5841L53.2111 95.362C56.2222 94.2478 56.4446 89.9601 53.6826 88.3232C30.6491 74.6723 14.1552 51.1503 10.028 23.5842C9.73191 21.6066 11.1743 19.8078 13.1697 19.6783C14.9406 19.5634 16.7269 19.505 18.5269 19.505C42.3046 19.505 63.7034 29.6907 78.5979 45.9369C79.1961 46.5894 79.5179 47.4462 79.5179 48.3313V51.9186C79.5179 54.9203 76.014 56.6897 73.3999 55.2142C65.8247 50.9385 57.0756 48.4986 47.7567 48.4986C47.0405 48.4986 46.3278 48.513 45.6185 48.5416C43.6205 48.622 42.1733 50.426 42.5135 52.3965C45.356 68.8628 55.1006 82.966 68.6607 91.619C70.9995 93.1115 70.7946 96.8459 68.1926 97.8088C65.4683 98.8168 65.4683 102.67 68.1926 103.678L70.3618 104.481C73.2004 105.531 73.6316 109.504 71.3532 111.496C62.2279 119.477 56.4642 131.206 56.4642 144.281C56.4642 145.724 56.5345 147.151 56.6717 148.558C56.8657 150.548 58.7714 151.864 60.7088 151.37C65.2002 150.225 69.4589 148.497 73.4 146.273C76.0141 144.797 79.5179 146.567 79.5179 149.568Z"
						fill={theme`colors.pink.600`}
					/>
				</Icon>
			</Root>
		</MaybeWrap>
	);
};
